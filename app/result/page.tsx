import type { Metadata } from 'next';
export async function generateMetadata({ searchParams }: { searchParams: { [key: string]: string | string[] | undefined } }): Promise<Metadata> {
  const points=String(searchParams.points ?? '0.000'); const label=String(searchParams.label ?? 'Uniquely Yours'); const date=String(searchParams.date ?? ''); const site=process.env.NEXT_PUBLIC_SITE_URL || 'http://localhost:3000'; const og=`${site}/api/og?points=${encodeURIComponent(points)}&label=${encodeURIComponent(label)}&date=${encodeURIComponent(date)}`; return { title:`I scored ${points} Stupid Points™`, openGraph:{ images:[og] }, twitter:{ images:[og], card:'summary_large_image' } }; }
export default function ResultPage({ searchParams }: { searchParams: { [key: string]: string | string[] | undefined }}){ const points=String(searchParams.points ?? '0.000'); const correct=String(searchParams.correct ?? '0'); const total=String(searchParams.total ?? '0'); const label=String(searchParams.label ?? 'Uniquely Yours'); const date=String(searchParams.date ?? ''); function copyShare(){ const text=`I scored ${points} Stupid Points™ on One Stupid Quiz (${date}). Your turn: ${typeof window!=='undefined'? window.location.origin + '/today': ''}`; navigator.clipboard.writeText(text); alert('Copied share text! Paste it on X/WhatsApp/Instagram.'); } return (<div className='card'><h1>Share Your Result</h1><p><strong>Correct:</strong> {correct}/{total}</p><p><strong>Stupid Points™:</strong> {points} <span className='small'>({label})</span></p><p className='small mono'>Open Graph image attached for social previews.</p><div style={{display:'flex', gap:8, marginTop:8}}><a className='btn' href='/today'>Play again tomorrow →</a><button className='btn' onClick={copyShare}>Copy share text</button></div></div>); }
